<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopify Editions Winter 2026 - Product Showcase</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            position: relative;
        }
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* background-image: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1920&q=80'); */
            background-image: url('Shopify.png');
            background-size: cover;
            background-position: center;
            z-index: 0;
            transition: transform 0.1s ease-out;
            will-change: transform;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            position: relative;
            z-index: 1;
        }
        #ui {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            pointer-events: none;
            z-index: 10;
            width: 100%;
            mix-blend-mode: exclusion;
            user-select: none;
        }
        h1 {
            font-size: 8rem;
            letter-spacing: -0.05em;
            margin: 0;
            font-weight: 800;
            line-height: 1;
            opacity: 0.1;
        }
        p {
            font-size: 1.25rem;
            opacity: 0.6;
            margin-top: 1rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: sans-serif;
            font-size: 1.2rem;
            transition: opacity 0.5s;
            z-index: 20;
        }
        #controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        .model-btn {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            border-radius: 8px;
            font-family: inherit;
        }
        .model-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        .model-btn.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body>
    <div id="background"></div>
    <div id="loading">Loading 3D Model...</div>
    <div id="ui">
        <h1>EDITIONS</h1>
        <p>Winter 2026</p>
    </div>
    <div id="controls">
        <button class="model-btn active" data-model="helmet">ðŸª– Helmet</button>
        <button class="model-btn" data-model="buggy">ðŸš— Buggy</button>
        <button class="model-btn" data-model="engine">ðŸ”§ Engine</button>
        <button class="model-btn" data-model="camera">ðŸ“· Camera</button>
        <button class="model-btn" data-model="scifi">ðŸŽ® Sci-Fi</button>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { RGBELoader } from 'three/addons/loaders/RGBELoader.js';

        const MODELS = {
            helmet: {
                url: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF-Binary/DamagedHelmet.glb',
                name: 'Damaged Helmet'
            },
            buggy: {
                url: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Buggy/glTF-Binary/Buggy.glb',
                name: 'Buggy Car'
            },
            engine: {
                url: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/2CylinderEngine/glTF-Binary/2CylinderEngine.glb',
                name: '2 Cylinder Engine'
            },
            camera: {
                url: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/AntiqueCamera/glTF-Binary/AntiqueCamera.glb',
                name: 'Antique Camera'
            },
            scifi: {
                url: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/SciFiHelmet/glTF/SciFiHelmet.gltf',
                name: 'Sci-Fi Helmet'
            }
        };

        const CONFIG = {
            currentModel: 'helmet',
            envUrl: 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/equirectangular/royal_esplanade_1k.hdr',
            mouseSensitivity: 1.0,
            lerpFactor: 0.05
        };

        const state = {
            mouseX: 0,
            mouseY: 0,
            targetX: 0,
            targetY: 0,
            modelReady: false
        };

        const scene = new THREE.Scene();
        scene.background = null;
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 0, 0.5);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2;
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        renderer.domElement.style.background = 'transparent';
        document.body.appendChild(renderer.domElement);

        const backgroundEl = document.getElementById('background');

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const spotLight = new THREE.SpotLight(0xffffff, 10);
        spotLight.position.set(2, 2, 2);
        spotLight.angle = 0.5;
        spotLight.penumbra = 1;
        spotLight.castShadow = true;
        spotLight.shadow.mapSize.width = 1024;
        spotLight.shadow.mapSize.height = 1024;
        spotLight.shadow.bias = -0.0001;
        scene.add(spotLight);

        const fillLight = new THREE.PointLight(0x9090ff, 5);
        fillLight.position.set(-2, 0, 2);
        scene.add(fillLight);

        const rimLight = new THREE.SpotLight(0xff00cc, 8);
        rimLight.position.set(0, 2, -2);
        rimLight.lookAt(0, 0, 0);
        scene.add(rimLight);

        const shadowPlane = new THREE.Mesh(
            new THREE.PlaneGeometry(10, 10),
            new THREE.ShadowMaterial({ opacity: 0.4 })
        );
        shadowPlane.rotation.x = -Math.PI / 2;
        shadowPlane.position.y = -0.2;
        shadowPlane.receiveShadow = true;
        scene.add(shadowPlane);

        new RGBELoader().load(CONFIG.envUrl, (texture) => {
            texture.mapping = THREE.EquirectangularReflectionMapping;
            scene.environment = texture;
        }, undefined, (error) => {
            console.warn('Environment map failed to load, using lights only:', error);
        });

        const productGroup = new THREE.Group();
        scene.add(productGroup);

        const loader = new GLTFLoader();

        function loadModel(modelKey) {
            const modelData = MODELS[modelKey];
            if (!modelData) return;

            const loadingEl = document.getElementById('loading');
            if (loadingEl) {
                loadingEl.style.opacity = 1;
                loadingEl.style.display = 'block';
                loadingEl.innerText = `Loading ${modelData.name}...`;
                loadingEl.style.color = 'white';
            }

            while(productGroup.children.length > 0) {
                productGroup.remove(productGroup.children[0]);
            }

            state.modelReady = false;

            console.log('Loading model from:', modelData.url);
            loader.load(modelData.url, (gltf) => {
                console.log('Model loaded successfully:', gltf);
                const model = gltf.scene;

                const box = new THREE.Box3().setFromObject(model);
                const size = box.getSize(new THREE.Vector3());
                const center = box.getCenter(new THREE.Vector3());

                model.position.sub(center);

                const maxDim = Math.max(size.x, size.y, size.z);
                const scaleFactor = 0.25 / maxDim;
                model.scale.setScalar(scaleFactor);

                model.traverse((child) => {
                    if (child.isMesh) {
                        child.castShadow = true;
                        child.receiveShadow = true;
                    }
                });

                model.rotation.set(0.5, -0.5, 0);

                productGroup.add(model);
                state.modelReady = true;

                if (loadingEl) {
                    loadingEl.style.opacity = 0;
                    setTimeout(() => loadingEl.style.display = 'none', 500);
                }
            }, (progress) => {
                console.log('Loading progress:', (progress.loaded / progress.total * 100).toFixed(2) + '%');
            }, (error) => {
                console.error('Error loading model:', error);
                if (loadingEl) {
                    loadingEl.innerText = 'Error: ' + error.message;
                    loadingEl.style.color = '#ff4444';
                }
            });
        }

        document.querySelectorAll('.model-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const modelKey = btn.dataset.model;
                CONFIG.currentModel = modelKey;

                document.querySelectorAll('.model-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                loadModel(modelKey);
            });
        });

        loadModel(CONFIG.currentModel);

        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        const handlePointerMove = (event) => {
            if (prefersReducedMotion) return;
            const x = event.clientX ?? event.touches?.[0]?.clientX ?? 0;
            const y = event.clientY ?? event.touches?.[0]?.clientY ?? 0;
            state.mouseX = (x / window.innerWidth) * 2 - 1;
            state.mouseY = -(y / window.innerHeight) * 2 + 1;
        };

        window.addEventListener('mousemove', handlePointerMove);
        window.addEventListener('touchmove', handlePointerMove, { passive: true });

        const handleResize = () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        };

        window.addEventListener('resize', handleResize);

        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);

            const time = clock.getElapsedTime();

            if (!prefersReducedMotion) {
                state.targetX += (state.mouseX - state.targetX) * CONFIG.lerpFactor;
                state.targetY += (state.mouseY - state.targetY) * CONFIG.lerpFactor;

                if (state.modelReady) {
                    productGroup.rotation.y = THREE.MathUtils.lerp(
                        productGroup.rotation.y,
                        state.targetX * CONFIG.mouseSensitivity,
                        0.1
                    );
                    productGroup.rotation.x = THREE.MathUtils.lerp(
                        productGroup.rotation.x,
                        state.targetY * CONFIG.mouseSensitivity * 0.5,
                        0.1
                    );

                    productGroup.position.y = Math.sin(time * 1) * 0.01;
                }

                camera.position.x += (state.mouseX * 0.05 - camera.position.x) * 0.05;
                camera.position.y += (state.mouseY * 0.05 - camera.position.y) * 0.05;
                camera.lookAt(0, 0, 0);

                if (backgroundEl) {
                    const bgMoveX = state.targetX * 30;
                    const bgMoveY = state.targetY * 30;
                    backgroundEl.style.transform = `translate(${bgMoveX}px, ${bgMoveY}px) scale(1.1)`;
                }
            }

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
